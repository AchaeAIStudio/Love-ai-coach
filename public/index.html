<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Love AI Coach</title>
  <style>
    body { font-family: Arial; padding: 20px; line-height: 1.6; }
    input, textarea { width: 300px; margin-bottom: 10px; padding: 8px; }
    button { padding: 10px 15px; }
    #result { white-space: pre-line; margin-top: 20px; }
  </style>
</head>
<body>

  <h1>Love AI Coach ♥</h1>
  <p>상대와의 관계를 입력하면 AI가 맞춤 코칭을 제공합니다.</p>

  <input id="myMbti" placeholder="내 MBTI (예: INFP)" /><br>
  <input id="partnerMbti" placeholder="상대 MBTI (예: ESTJ)" /><br>
  <input id="relationship" placeholder="관계 상태 (썸, 연애, 유지 등)" /><br>
  <textarea id="dialogText" rows="4" placeholder="상황/고민 적기"></textarea><br>

  <button onclick="sendToServer()">AI 코칭 받기</button>

  <h2>응답:</h2>
  <div id="result"></div>

<script>
async function sendToServer() {
  const payload = {
    myMbti: document.getElementById("myMbti").value,
    partnerMbti: document.getElementById("partnerMbti").value,
    relationshipStage: document.getElementById("relationship").value,
    dialogText: document.getElementById("dialogText").value,
    goal: "조언"
  };

  const res = await fetch("/api/coach", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });

  const data = await res.json();
  document.getElementById("result").innerText =
    data.ok
      ? data.aiMessage
      : "오류 발생: " + data.error;
}
</script>

</body>
</html>
